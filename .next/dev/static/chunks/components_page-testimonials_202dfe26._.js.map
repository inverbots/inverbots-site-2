{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/page-testimonials/pageTestimonials.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"card\": \"pageTestimonials-module___v3k4a__card\",\n  \"cardText\": \"pageTestimonials-module___v3k4a__cardText\",\n  \"closeButton\": \"pageTestimonials-module___v3k4a__closeButton\",\n  \"container\": \"pageTestimonials-module___v3k4a__container\",\n  \"expanded\": \"pageTestimonials-module___v3k4a__expanded\",\n  \"featuredCard\": \"pageTestimonials-module___v3k4a__featuredCard\",\n  \"featuredContent\": \"pageTestimonials-module___v3k4a__featuredContent\",\n  \"featuredSection\": \"pageTestimonials-module___v3k4a__featuredSection\",\n  \"featuredText\": \"pageTestimonials-module___v3k4a__featuredText\",\n  \"featuredVideoWrapper\": \"pageTestimonials-module___v3k4a__featuredVideoWrapper\",\n  \"grid\": \"pageTestimonials-module___v3k4a__grid\",\n  \"sectionTitle\": \"pageTestimonials-module___v3k4a__sectionTitle\",\n  \"videoWrapper\": \"pageTestimonials-module___v3k4a__videoWrapper\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joseg/OneDrive/Escritorio/proyecto/inverbots/inverbots-site/components/page-testimonials/PageTestimonials.jsx"],"sourcesContent":["/* eslint-disable camelcase */\r\n'use client'\r\nimport { useEffect, useState, useRef } from 'react'\r\nimport style from './pageTestimonials.module.css'\r\nimport 'lite-youtube-embed/src/lite-yt-embed.css'\r\n\r\nfunction getYouTubeId(url) {\r\n  if (!url) return null\r\n  if (url.includes('<iframe')) {\r\n    const match = url.match(/src=[\"'](.*?)[\"']/)\r\n    if (match && match[1]) {\r\n      url = match[1]\r\n    }\r\n  }\r\n  const regExp = /^.*(youtu.be\\/|v\\/|u\\/\\w\\/|embed\\/|watch\\?v=|&v=)([^#&?]*).*/\r\n  const match = url.match(regExp)\r\n  return (match && match[2].length === 11) ? match[2] : null\r\n}\r\n\r\nexport default function PageTestimonials({ mainTestimonial, testimonials = [] }) {\r\n  const [expandedIndex, setExpandedIndex] = useState(null)\r\n  const playerRefs = useRef({})\r\n  const activeIndexRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    import('lite-youtube-embed')\r\n\r\n    if (!window.YT) {\r\n      const tag = document.createElement('script')\r\n      tag.src = 'https://www.youtube.com/iframe_api'\r\n      const firstScriptTag = document.getElementsByTagName('script')[0]\r\n      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)\r\n    }\r\n  }, [])\r\n\r\n  const handleVideoClick = (index, videoId) => {\r\n    // Only set expanded if not already (to avoid re-triggering logic unnecessarily)\r\n    if (expandedIndex !== index) {\r\n      activeIndexRef.current = index\r\n      setExpandedIndex(index)\r\n    }\r\n\r\n    const checkIframe = setInterval(() => {\r\n      const container = document.getElementById(`testimonial-card-${index}`)\r\n      const iframe = container?.querySelector('iframe')\r\n\r\n      if (iframe && window.YT && window.YT.Player) {\r\n        clearInterval(checkIframe)\r\n\r\n        playerRefs.current[index] = new window.YT.Player(iframe, {\r\n          events: {\r\n            'onStateChange': (event) => {\r\n              const playerState = event.data\r\n              const PLAYING = 1\r\n\r\n              if (playerState === PLAYING) {\r\n                // Pause others logic\r\n                Object.keys(playerRefs.current).forEach((key) => {\r\n                  const otherIndex = parseInt(key)\r\n                  if (otherIndex !== index) {\r\n                    const otherPlayer = playerRefs.current[key]\r\n                    if (otherPlayer && typeof otherPlayer.pauseVideo === 'function') {\r\n                      otherPlayer.pauseVideo()\r\n                    }\r\n                  }\r\n                })\r\n                activeIndexRef.current = index\r\n              }\r\n              // REMOVED: Logic to collapse on PAUSE or ENDED\r\n            }\r\n          }\r\n        })\r\n      }\r\n    }, 500)\r\n\r\n    setTimeout(() => clearInterval(checkIframe), 10000)\r\n  }\r\n\r\n  const handleClose = (e, index) => {\r\n    e.stopPropagation() // Prevent triggering the card click\r\n    setExpandedIndex(null)\r\n    activeIndexRef.current = null\r\n\r\n    // Optionally pause the video when closing\r\n    const player = playerRefs.current[index]\r\n    if (player && typeof player.pauseVideo === 'function') {\r\n      player.pauseVideo()\r\n    }\r\n  }\r\n\r\n  const mainVideoId = getYouTubeId(mainTestimonial?.url_del_video)\r\n\r\n  return (\r\n    <div className={style.container}>\r\n      {mainVideoId && (\r\n        <section className={style.featuredSection}>\r\n          <h2 className={style.sectionTitle}>Historia Destacada</h2>\r\n          <div className={style.featuredCard}>\r\n            <div className={style.featuredVideoWrapper}>\r\n              <lite-youtube videoid={mainVideoId} playlabel='Reproducir video' />\r\n            </div>\r\n            <div className={style.featuredContent}>\r\n              <p className={style.featuredText}>{mainTestimonial?.texto_complementario_video}</p>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      <section className={style.gridSection}>\r\n        <h2 className={style.sectionTitle}>Más Historias de Éxito</h2>\r\n        <div className={style.grid}>\r\n          {testimonials.map((item, index) => {\r\n            const videoId = getYouTubeId(item.url_video_testimonio)\r\n            if (!videoId) return null\r\n\r\n            const isExpanded = expandedIndex === index\r\n\r\n            return (\r\n              <div\r\n                key={index}\r\n                id={`testimonial-card-${index}`}\r\n                className={`${style.card} ${isExpanded ? style.expanded : ''}`}\r\n                onClick={() => handleVideoClick(index, videoId)}\r\n              >\r\n                {isExpanded && (\r\n                  <button\r\n                    className={style.closeButton}\r\n                    onClick={(e) => handleClose(e, index)}\r\n                    aria-label=\"Cerrar video\"\r\n                  >\r\n                    ×\r\n                  </button>\r\n                )}\r\n\r\n                <div className={style.videoWrapper}>\r\n                  <lite-youtube\r\n                    videoid={videoId}\r\n                    playlabel='Reproducir testimonio'\r\n                    params=\"enablejsapi=1\"\r\n                  />\r\n                </div>\r\n                {item.texto_complementarios_testimonio && (\r\n                  <p className={style.cardText}>{item.texto_complementarios_testimonio}</p>\r\n                )}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      </section>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}